@attribute [Authorize(Roles = "Admin")]
<Microsoft.AspNetCore.Components.Authorization.AuthorizeView Roles="Admin">
    <Authorized>
        <MudDialog>
            <DialogContent>
                <MudAutocomplete T="string" Label="Description Title" @bind-Value="CharacterSkillDetail.SkillDetailsName"
                                 CoerceValue="true" CoerceText="true" ResetValueOnEmptyText="true" MaxItems="4" Immediate="true"
                                 SelectOnClick="true" TextChanged="TextChangedSkillDetailName" SearchFunc="SearchSkillDetailName" />
                @if(CharacterSkillDetail.SkillDetailsName is not null)
                {
                    <MudAutocomplete T="int" Label="Level" @bind-Value="CharacterSkillDetailNumber.Level" HelperText="Please Put a Number"
                                     CoerceValue="true" CoerceText="true" ResetValueOnEmptyText="true" MaxItems="4" Immediate="true"
                                     SelectOnClick="true" TextChanged="TextChangedSkillLevel" SearchFunc="SearchSkillLevel" />
                }
                @if(CharacterSkillDetailNumber.Level > 0)
                {
                    foreach(var numberMultiplier in CharacterSkillDetailNumber.NumberMultipliers)
                    {
                        <MudStack Row="true" Wrap="Wrap.Wrap" Spacing="5">
                            <MudNumericField T="double" Step="0.01" Label="Skill Detail Percentage" @bind-Value="numberMultiplier.Number" />
                            <MudCheckBox @bind-Value="numberMultiplier.IsPercentage"/>
                        </MudStack>
                        
                        <MudNumericField T="int?" Label="Skill Detail Multiplier" @bind-Value="numberMultiplier.Multiplier" />
                        <MudIconButton Icon="@Icons.Material.Filled.DeleteForever" OnClick="() => Delete(numberMultiplier)"/>
                    }
                    <MudStack Row="true">
                        <MudIconButton Icon="@Icons.Material.Filled.Add" OnClick="AddIndexListNumber" />
                        <MudIconButton Icon="@Icons.Material.Filled.Remove" OnClick="MinIndexListNumber" />
                        
                    </MudStack>
                   
                }
            </DialogContent>
            <DialogActions>
                <MudButton StartIcon="@Icons.Material.Filled.DeleteForever" IconColor="Color.Error" OnClick="() => Delete(CharacterSkillDetail)">
                    Delete
                </MudButton>
                <MudButton StartIcon="@Icons.Material.Filled.Save" OnClick="Save">
                    Save
                </MudButton>
            </DialogActions>
        </MudDialog>
    </Authorized>
</Microsoft.AspNetCore.Components.Authorization.AuthorizeView>


@code {

}
