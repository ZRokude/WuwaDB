@using WuwaDB.DBAccess.Enum
<MudDialog>
    <DialogContent>
        <MudTextField T="string" @bind-Value="Character.Name" Label="Character Name"/>
        <MudSelect T="ElementType" @bind-Value="Character.Element">
            @foreach (ElementType Element in Enum.GetValues(typeof(ElementType)))
            {
                <MudSelectItem T="ElementType" Value="Element">@Element</MudSelectItem>
            }
        </MudSelect>
        <MudSelect T="WeaponType" @bind-Value="Character.Weapon">
            @foreach (WeaponType Weapon in Enum.GetValues(typeof(WeaponType)))
            {
                <MudSelectItem T="WeaponType" Value="Weapon">@Weapon.ToString()</MudSelectItem>
            }
        </MudSelect>
        <MudSelect T="RarityType" @bind-Value="Character.Rarity">
            @foreach (RarityType Rarity in Enum.GetValues(typeof(RarityType)))
            {
                <MudSelectItem T="RarityType" Value="Rarity">@Rarity.ToString()</MudSelectItem>
            }
        </MudSelect>
        <MudFileUpload Context="MudUploadImageModel" T="IBrowserFile" OnFilesChanged="OnChangedImageModel" MaximumFileCount="20971520" Accept=".png, .jpg, .jpeg">
            <ButtonTemplate Context="MudUploadImageModel">
                <MudFab HtmlTag="label"
                        Color="Color.Success"
                        Icon="@Icons.Material.Filled.AttachFile"
                        Label="Image Model"
                        for="@MudUploadImageModel.Id" />
            </ButtonTemplate>
            <SelectedTemplate>
                @if (imageData.ContainsKey(nameof(Character.ImageModel)))
                {
                    @if (imageData.TryGetValue(nameof(Character.ImageModel), out var image))
                    {
                        <MudImage Src="@image"/>
                    }
                }
            </SelectedTemplate>
        </MudFileUpload>
        <MudFileUpload Context="MudUploadImageCard" T="IBrowserFile" OnFilesChanged="OnChangedImageCard" MaximumFileCount="20971520" Accept=".png, .jpg, .jpeg">
                <ButtonTemplate Context="MudUploadImageCard">
                <MudFab HtmlTag="label"
                        Color="Color.Success"
                        Icon="@Icons.Material.Filled.AttachFile"
                        Label="Image Card"
                        for="@MudUploadImageCard.Id" />
            </ButtonTemplate>
            <SelectedTemplate>
                @if (imageData.ContainsKey(nameof(Character.ImageCard)))
                {
                    @if (imageData.TryGetValue(nameof(Character.ImageCard), out var image))
                    {
                        <MudImage Src="@image"/>
                    }
                }
            </SelectedTemplate>
        </MudFileUpload>
    </DialogContent>
    <DialogActions>
        <MudButton StartIcon="@Icons.Material.Filled.Save" OnClick="UpdateCharacter">
            Save
        </MudButton>
    </DialogActions>
</MudDialog>

@code {

}
